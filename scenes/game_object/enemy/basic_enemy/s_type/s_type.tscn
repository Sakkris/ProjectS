[gd_scene load_steps=19 format=3 uid="uid://bqs3j4pr17uml"]

[ext_resource type="PackedScene" uid="uid://ciowisqs1ayti" path="res://scenes/game_object/enemy/basic_enemy/enemy_drone.tscn" id="1_rm0u1"]
[ext_resource type="Script" path="res://scenes/game_object/enemy/basic_enemy/s_type/s_type.gd" id="2_13nvo"]
[ext_resource type="PackedScene" uid="uid://5sd8an8bku8m" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/get_in_range/get_in_range.tscn" id="3_lx4p8"]
[ext_resource type="Script" path="res://addons/beehave/nodes/composites/selector.gd" id="3_w1oil"]
[ext_resource type="Script" path="res://addons/beehave/nodes/composites/sequence.gd" id="5_u2yk2"]
[ext_resource type="Script" path="res://addons/beehave/nodes/decorators/inverter.gd" id="6_ax5bj"]
[ext_resource type="PackedScene" uid="uid://dui880u3bqfvx" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/is_player_in_attack_range/is_player_in_attack_range.tscn" id="6_wbjhe"]
[ext_resource type="PackedScene" uid="uid://do8u2i5w4d44j" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/is_obstacle_between/is_obstacle_between.tscn" id="7_56vfy"]
[ext_resource type="Script" path="res://addons/beehave/nodes/leaves/blackboard_compare.gd" id="8_o2mqc"]
[ext_resource type="PackedScene" uid="uid://djhl36f7c2q06" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/engage_shot/engage_shot.tscn" id="9_e8wlm"]
[ext_resource type="PackedScene" uid="uid://tmopxx552cut" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/shoot_player/shoot_player.tscn" id="10_dmgx7"]
[ext_resource type="PackedScene" uid="uid://btxpohtjbepmf" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/desengage_shot/desengage_shot.tscn" id="11_dpxgg"]
[ext_resource type="PackedScene" uid="uid://d1j55mqpvnjce" path="res://scenes/game_object/projectile/bullets/enemy_bullet/enemy_bullet.tscn" id="11_ir4ee"]
[ext_resource type="Script" path="res://scenes/game_object/enemy/basic_enemy/common_action_leafs/desengage_shot/desengage_shot.gd" id="12_yana7"]
[ext_resource type="Material" uid="uid://cjref85lolkjo" path="res://resources/enemy_model/stype_drone_mat.tres" id="16_pd52y"]
[ext_resource type="AudioStream" uid="uid://dd18utb5gemnf" path="res://resources/sounds/lock_on/lock_on_01.wav" id="16_qfmo1"]
[ext_resource type="AudioStream" uid="uid://0t83kxo877f" path="res://resources/sounds/lock_on/lock_on_04.wav" id="17_5pfpa"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kf5ao"]
albedo_color = Color(0.168627, 0.803922, 1, 1)

[node name="SType" instance=ExtResource("1_rm0u1")]
script = ExtResource("2_13nvo")
attack_range_limit = 30
attack_range = 25
detection_range = 35

[node name="VelocityComponent" parent="." index="0"]
max_speed = 5.0
max_overloaded_speed = 7.5
acceleration_coeficient = 4.0
turn_speed = 1.7

[node name="BeehaveTree" parent="." index="1"]
enabled = false

[node name="SelectorComposite" type="Node" parent="BeehaveTree" index="0"]
script = ExtResource("3_w1oil")

[node name="SelectorComposite" type="Node" parent="BeehaveTree/SelectorComposite" index="0"]
script = ExtResource("3_w1oil")

[node name="SequenceComposite" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite" index="0"]
script = ExtResource("5_u2yk2")

[node name="IsPlayerInAttackRange" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite" index="0" instance=ExtResource("6_wbjhe")]

[node name="InverterDecorator" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite" index="1"]
script = ExtResource("6_ax5bj")

[node name="IsObstacleBetween" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite/InverterDecorator" index="0" instance=ExtResource("7_56vfy")]

[node name="InverterDecorator2" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite" index="2"]
script = ExtResource("6_ax5bj")

[node name="SequenceComposite" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite/InverterDecorator2" index="0"]
script = ExtResource("5_u2yk2")

[node name="InverterDecorator" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite/InverterDecorator2/SequenceComposite" index="0"]
script = ExtResource("6_ax5bj")

[node name="IsEngaged" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite/InverterDecorator2/SequenceComposite/InverterDecorator" index="0"]
script = ExtResource("8_o2mqc")
left_operand = "get_value(\"is_engaged\")"
right_operand = "true"

[node name="InverterDecorator2" type="Node" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite/InverterDecorator2/SequenceComposite" index="1"]
script = ExtResource("6_ax5bj")

[node name="EngageShot" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite/InverterDecorator2/SequenceComposite/InverterDecorator2" index="0" node_paths=PackedStringArray("lock_on_audio") instance=ExtResource("9_e8wlm")]
lock_on_audio = NodePath("../../../../../../../../LockOnPlayer")

[node name="ShootPlayer" parent="BeehaveTree/SelectorComposite/SelectorComposite/SequenceComposite" index="3" instance=ExtResource("10_dmgx7")]
bullet_scene = ExtResource("11_ir4ee")

[node name="DesengageShot" parent="BeehaveTree/SelectorComposite/SelectorComposite" index="1" node_paths=PackedStringArray("lost_player_audio") instance=ExtResource("11_dpxgg")]
script = ExtResource("12_yana7")
lost_player_audio = NodePath("../../../../LockOffPlayer")

[node name="GetInRange" parent="BeehaveTree/SelectorComposite" index="1" node_paths=PackedStringArray("is_obstacle_between_checker") instance=ExtResource("3_lx4p8")]
is_obstacle_between_checker = NodePath("../SelectorComposite/SequenceComposite/InverterDecorator/IsObstacleBetween")

[node name="GunNuzzle" type="Node3D" parent="." index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.375887)

[node name="MeshInstance3D" parent="Visuals" index="0"]
material_override = SubResource("StandardMaterial3D_kf5ao")

[node name="main_body" parent="Visuals/DroneMesh/bad_Ship" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
material_override = ExtResource("16_pd52y")

[node name="long_rod_A" parent="Visuals/DroneMesh/bad_Ship/main_body" index="0"]
transform = Transform3D(0.933817, -0.353892, 0.0523942, 0.240697, 0.729856, 0.639824, -0.264669, -0.584868, 0.766733, 0, 0, 0)
material_override = ExtResource("16_pd52y")

[node name="fx_tip" parent="Visuals/DroneMesh/bad_Ship/main_body/long_rod_A" index="0"]
material_override = ExtResource("16_pd52y")

[node name="long_rod_B" parent="Visuals/DroneMesh/bad_Ship/main_body" index="1"]
transform = Transform3D(0.99803, 0.0254741, -0.057341, 0.00362709, 0.888924, 0.45804, 0.06264, -0.457346, 0.88708, 0, 0, 0)
material_override = ExtResource("16_pd52y")

[node name="fx_tip (1)" parent="Visuals/DroneMesh/bad_Ship/main_body/long_rod_B" index="0"]
material_override = ExtResource("16_pd52y")

[node name="small_rod_A" parent="Visuals/DroneMesh/bad_Ship/main_body" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
material_override = ExtResource("16_pd52y")

[node name="fx_tip_s" parent="Visuals/DroneMesh/bad_Ship/main_body/small_rod_A" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.22532e-19, -2.70122e-18, -1.06581e-16)
material_override = ExtResource("16_pd52y")

[node name="small_rod_B" parent="Visuals/DroneMesh/bad_Ship/main_body" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
material_override = ExtResource("16_pd52y")

[node name="fx_tip_s (1)" parent="Visuals/DroneMesh/bad_Ship/main_body/small_rod_B" index="0"]
material_override = ExtResource("16_pd52y")

[node name="head_piece" parent="Visuals/DroneMesh/bad_Ship/main_body" index="4"]
transform = Transform3D(1, 0, 0, 0, 0.941527, -0.336936, 0, 0.336936, 0.941527, 0, 0.123876, 0.0443304)
material_override = ExtResource("16_pd52y")

[node name="neck_glow" parent="Visuals/DroneMesh/bad_Ship/main_body/head_piece" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.04092e-18, -2.22045e-18, -1.45779e-18)
material_override = ExtResource("16_pd52y")

[node name="eye" parent="Visuals/DroneMesh/bad_Ship/main_body/head_piece" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
material_override = ExtResource("16_pd52y")

[node name="fx_tip_s (2)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces" index="0"]
transform = Transform3D(0.999933, -0.00324722, 0.0111479, -0.00328276, 0.841865, 0.539678, -0.0111375, -0.539678, 0.841798, 0.000224398, -0.00442911, -0.00139482)
material_override = ExtResource("16_pd52y")

[node name="fx_tip_s1" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces" index="1"]
transform = Transform3D(0.999063, 0.00223062, 0.0432304, 0.0227847, 0.82204, -0.568973, -0.0368063, 0.569425, 0.821219, -3.62645e-13, 1.7747e-12, 9.45484e-13)
material_override = ExtResource("16_pd52y")

[node name="neck_glow (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces" index="2"]
transform = Transform3D(1, 0, 0, 0, 0.909149, -0.416471, 0, 0.416471, 0.909149, 2.4717e-18, 0.119616, 0.0547948)
material_override = ExtResource("16_pd52y")

[node name="head_piece (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces" index="3"]
transform = Transform3D(1, 0, 0, 0, 0.909149, -0.416471, 0, 0.416471, 0.909149, 1.43079e-18, 0.119616, 0.0547948)
material_override = ExtResource("16_pd52y")

[node name="shard1" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter1" index="0"]
material_override = ExtResource("16_pd52y")

[node name="shard2" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter1" index="1"]
material_override = ExtResource("16_pd52y")

[node name="shard3" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter1" index="2"]
material_override = ExtResource("16_pd52y")

[node name="shard4" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter2" index="0"]
material_override = ExtResource("16_pd52y")

[node name="shard5" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter2" index="1"]
material_override = ExtResource("16_pd52y")

[node name="shard6" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter2" index="2"]
material_override = ExtResource("16_pd52y")

[node name="shard1 (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter3" index="0"]
material_override = ExtResource("16_pd52y")

[node name="shard2 (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter3" index="1"]
material_override = ExtResource("16_pd52y")

[node name="shard3 (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter3" index="2"]
material_override = ExtResource("16_pd52y")

[node name="shard4 (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter4" index="0"]
material_override = ExtResource("16_pd52y")

[node name="shard5 (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter4" index="1"]
material_override = ExtResource("16_pd52y")

[node name="shard6 (1)" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter4" index="2"]
material_override = ExtResource("16_pd52y")

[node name="shard7" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter5" index="0"]
material_override = ExtResource("16_pd52y")

[node name="shard8" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter5" index="1"]
material_override = ExtResource("16_pd52y")

[node name="shard9" parent="Visuals/DroneMesh/bad_Ship/explosion_pieces/solidShatter5" index="2"]
material_override = ExtResource("16_pd52y")

[node name="LockOnPlayer" parent="." index="7"]
stream = ExtResource("17_5pfpa")

[node name="LockOffPlayer" type="AudioStreamPlayer3D" parent="." index="8"]
stream = ExtResource("16_qfmo1")

[editable path="Visuals/DroneMesh"]
